"use strict";
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
exports.SolutionLoaderMW = void 0;
const SolutionPluginContainer_1 = require("../SolutionPluginContainer");
async function SolutionLoaderMW(ctx, next) {
    var _a, _b;
    const solutionName = (_b = (_a = ctx.projectSettings) === null || _a === void 0 ? void 0 : _a.solutionSettings) === null || _b === void 0 ? void 0 : _b.name;
    if (solutionName) {
        {
            const solution = SolutionPluginContainer_1.getSolutionPluginV2ByName(solutionName);
            ctx.solutionV2 = solution;
        }
        {
            const solution = SolutionPluginContainer_1.getSolutionPluginByName(solutionName);
            ctx.solution = solution;
        }
    }
    else {
        // run from zero, load a default solution
        {
            const solution = SolutionPluginContainer_1.getAllSolutionPluginsV2()[0];
            ctx.solutionV2 = solution;
        }
        {
            const solution = SolutionPluginContainer_1.getAllSolutionPlugins()[0];
            ctx.solution = solution;
        }
    }
    await next();
}
exports.SolutionLoaderMW = SolutionLoaderMW;
//# sourceMappingURL=solutionLoader.js.map